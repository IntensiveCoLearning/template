---
timezone: Asia/Shanghai # åŒ—äº¬æ—¶é—´ (UTC+8)
---

> è¯·åœ¨ä¸Šè¾¹çš„ timezone æ·»åŠ ä½ çš„å½“åœ°æ—¶åŒºï¼Œè¿™ä¼šæœ‰åŠ©äºä½ çš„æ‰“å¡çŠ¶æ€çš„è‡ªåŠ¨åŒ–æ›´æ–°ï¼Œå¦‚æœæ²¡æœ‰æ·»åŠ ï¼Œé»˜è®¤ä¸ºåŒ—äº¬æ—¶é—´ UTC+8 æ—¶åŒº
> æ—¶åŒºè¯·å‚è€ƒä»¥ä¸‹åˆ—è¡¨ï¼Œè¯·ç§»é™¤ # ä»¥åçš„å†…å®¹

timezone: Pacific/Honolulu # å¤å¨å¤·-é˜¿ç•™ç”³æ ‡å‡†æ—¶é—´ (UTC-10)

timezone: America/Anchorage # é˜¿æ‹‰æ–¯åŠ æ ‡å‡†æ—¶é—´ (UTC-9)

timezone: America/Los_Angeles # å¤ªå¹³æ´‹æ ‡å‡†æ—¶é—´ (UTC-8)

timezone: America/Denver # å±±åœ°æ ‡å‡†æ—¶é—´ (UTC-7)

timezone: America/Chicago # ä¸­éƒ¨æ ‡å‡†æ—¶é—´ (UTC-6)

timezone: America/New_York # ä¸œéƒ¨æ ‡å‡†æ—¶é—´ (UTC-5)

timezone: America/Halifax # å¤§è¥¿æ´‹æ ‡å‡†æ—¶é—´ (UTC-4)

timezone: America/St_Johns # çº½èŠ¬å…°æ ‡å‡†æ—¶é—´ (UTC-3:30)

timezone: America/Sao_Paulo # å·´è¥¿åˆ©äºšæ—¶é—´ (UTC-3)

timezone: Atlantic/Azores # äºšé€Ÿå°”ç¾¤å²›æ—¶é—´ (UTC-1)

timezone: Europe/London # æ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´ (UTC+0)

timezone: Europe/Berlin # ä¸­æ¬§æ ‡å‡†æ—¶é—´ (UTC+1)

timezone: Europe/Helsinki # ä¸œæ¬§æ ‡å‡†æ—¶é—´ (UTC+2)

timezone: Europe/Moscow # è«æ–¯ç§‘æ ‡å‡†æ—¶é—´ (UTC+3)

timezone: Asia/Dubai # æµ·æ¹¾æ ‡å‡†æ—¶é—´ (UTC+4)

timezone: Asia/Kolkata # å°åº¦æ ‡å‡†æ—¶é—´ (UTC+5:30)

timezone: Asia/Dhaka # å­ŸåŠ æ‹‰å›½æ ‡å‡†æ—¶é—´ (UTC+6)

timezone: Asia/Bangkok # ä¸­å—åŠå²›æ—¶é—´ (UTC+7)

timezone: Asia/Shanghai # ä¸­å›½æ ‡å‡†æ—¶é—´ (UTC+8)

timezone: Asia/Tokyo # æ—¥æœ¬æ ‡å‡†æ—¶é—´ (UTC+9)

timezone: Australia/Sydney # æ¾³å¤§åˆ©äºšä¸œéƒ¨æ ‡å‡†æ—¶é—´ (UTC+10)

timezone: Pacific/Auckland # æ–°è¥¿å…°æ ‡å‡†æ—¶é—´ (UTC+12)

---

# {ä½ çš„åå­—}

1. è‡ªæˆ‘ä»‹ç»
    Qiao Pengjun ä¹”é¹å†›ã€‚æœ‰Pythonã€Goã€Rustã€solidityçš„å¼€å‘ç»éªŒã€‚å¤§çº¦æ˜¯å»å¹´å¼€å§‹äº†è§£Web3ï¼Œæœ€è¿‘åœ¨å­¦ä¹ solidityã€‚å¯¹åŒºå—é“¾æŠ€æœ¯å¾ˆæ„Ÿå…´è¶£ã€‚äº†è§£äº†ä¸€ç‚¹Solanaã€Suiã€Starknet... æ­£åœ¨ç»§ç»­å­¦ä¹ ã€‚å¸Œæœ›æœ¬æ¬¡å­¦ä¹ èƒ½è®©æˆ‘æ›´æ·±å…¥çš„äº†è§£Web3ã€‚æ‹¥æŠ±Web3ï¼Œæ‹¥æŠ±æœªæ¥ã€‚
2. ä½ è®¤ä¸ºä½ ä¼šå®Œæˆæœ¬æ¬¡æ®‹é…·å­¦ä¹ å—ï¼Ÿ
   æˆ‘è®¤ä¸ºæˆ‘ä¼šå®Œæˆæœ¬æ¬¡æ®‹é…·å­¦ä¹ ï¼Œå› ä¸ºæˆ‘æœ‰ä¿¡å¿ƒï¼Œå¹¶ä¸”æˆ‘ç›¸ä¿¡æˆ‘èƒ½å¤Ÿå…‹æœä»»ä½•å›°éš¾ã€‚

## Notes

<!-- Content_START -->

### 2024.09.07

Aptos åŒºå—é“¾ä¸Šçš„æ¯ä¸ªè´¦æˆ·éƒ½ç”±ä¸€ä¸ª 32 å­—èŠ‚çš„è´¦æˆ·åœ°å€æ ‡è¯†ã€‚
ä¸å…¶ä»–åŒºå—é“¾ä¸­è´¦æˆ·å’Œåœ°å€éšå¼ä¸åŒï¼ŒAptos ä¸Šçš„è´¦æˆ·æ˜¯æ˜¾å¼çš„ï¼Œéœ€è¦å…ˆåˆ›å»ºæ‰èƒ½æ‰§è¡Œäº¤æ˜“ã€‚
å¯ä»¥é€šè¿‡å°† Aptos ä»£å¸ (APT) è½¬ç§»åˆ° Aptos æ¥æ˜¾å¼æˆ–éšå¼åˆ›å»ºè´¦æˆ·ã€‚

Aptos ä¸Šæœ‰ä¸‰ç§ç±»å‹çš„è´¦æˆ·ï¼š

æ ‡å‡†è´¦æˆ·â€”â€”è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„è´¦æˆ·ï¼Œå¯¹åº”ä¸€ä¸ªåœ°å€å’Œä¸€å¯¹ç›¸åº”çš„å…¬é’¥/ç§é’¥ã€‚
èµ„æºè´¦æˆ·- ä¸€ä¸ªæ²¡æœ‰å¯¹åº”ç§é’¥çš„è‡ªä¸»è´¦æˆ·ï¼Œä¾›å¼€å‘è€…å­˜å‚¨èµ„æºæˆ–ä¸Šé“¾å‘å¸ƒæ¨¡å—ã€‚
å¯¹è±¡- å­˜å‚¨åœ¨ä»£è¡¨å•ä¸ªå®ä½“çš„å•ä¸ªåœ°å€å†…çš„ä¸€ç»„å¤æ‚èµ„æºã€‚

å¸æˆ·åœ°å€ä¸º 32 å­—èŠ‚ã€‚å®ƒä»¬é€šå¸¸æ˜¾ç¤ºä¸º 64 ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼Œæ¯ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ä¸ºä¸€ä¸ªåŠå­—èŠ‚ã€‚æœ‰æ—¶åœ°å€ä»¥ 0x ä¸ºå‰ç¼€ã€‚
AptosåŒºå—é“¾é»˜è®¤é‡‡ç”¨Ed25519ç­¾åäº¤æ˜“ã€‚

Aptos åŒºå—é“¾å­˜å‚¨ä¸‰ç§ç±»å‹çš„æ•°æ®ï¼š

äº¤æ˜“ï¼šäº¤æ˜“è¡¨ç¤ºåŒºå—é“¾ä¸Šçš„è´¦æˆ·æ­£åœ¨æ‰§è¡Œçš„é¢„æœŸæ“ä½œï¼ˆä¾‹å¦‚è½¬ç§»èµ„äº§ï¼‰ã€‚
çŠ¶æ€ï¼šï¼ˆåŒºå—é“¾è´¦æœ¬ï¼‰çŠ¶æ€ä»£è¡¨äº¤æ˜“æ‰§è¡Œè¾“å‡ºçš„ç´¯ç§¯ï¼Œå³å­˜å‚¨åœ¨æ‰€æœ‰èµ„æºå†…çš„ä»·å€¼ã€‚
äº‹ä»¶ï¼šäº¤æ˜“æ‰§â€‹â€‹è¡Œæ—¶å‘å¸ƒçš„è¾…åŠ©æ•°æ®ã€‚
åªæœ‰äº¤æ˜“æ‰èƒ½æ”¹å˜è´¦æœ¬çŠ¶æ€ã€‚

<https://aptos.dev/en/build/get-started/developer-setup>

Install the Aptos CLI on Mac

```bash
brew update
brew install aptos

aptos help

brew update
brew upgrade aptos

intensive-colearning-aptos on î‚  main via ğŸ…’ base took 4.3s 
âœ aptos --version              
aptos 4.1.0


Code/Aptos/hello_aptos via ğŸ…’ base
âœ
aptos init
Configuring for profile default
Choose network from [devnet, testnet, mainnet, local, custom | defaults to devnet]
devnet
Enter your private key as a hex literal (0x...) [Current: None | No input: Generate new key (or keep one if present)]

No key given, generating key...
Account 0xee6c038b66df7ed8aa91eb700938003ce29647f402c090ededd89b87a3c70e35 doesn't exist, creating it and funding it with 100000000 Octas
Account 0xee6c038b66df7ed8aa91eb700938003ce29647f402c090ededd89b87a3c70e35 funded successfully

---
Aptos CLI is now set up for account 0xee6c038b66df7ed8aa91eb700938003ce29647f402c090ededd89b87a3c70e35 as profile default!
 See the account here: https://explorer.aptoslabs.com/account/0xee6c038b66df7ed8aa91eb700938003ce29647f402c090ededd89b87a3c70e35?network=devnet
 Run `aptos --help` for more information about commands
{
  "Result": "Success"
}
                                                                                                                                              

Code/Aptos/hello_aptos via ğŸ…’ base took 1m 32.7s
âœ
aptos account list
{
  "Result": [
    {
      "0x1::account::Account": {
        "authentication_key": "0xee6c038b66df7ed8aa91eb700938003ce29647f402c090ededd89b87a3c70e35",
        "coin_register_events": {
          "counter": "0",
          "guid": {
            "id": {
              "addr": "0xee6c038b66df7ed8aa91eb700938003ce29647f402c090ededd89b87a3c70e35",
              "creation_num": "0"
            }
          }
        },
        "guid_creation_num": "2",
        "key_rotation_events": {
          "counter": "0",
          "guid": {
            "id": {
              "addr": "0xee6c038b66df7ed8aa91eb700938003ce29647f402c090ededd89b87a3c70e35",
              "creation_num": "1"
            }
          }
        },
        "rotation_capability_offer": {
          "for": {
            "vec": []
          }
        },
        "sequence_number": "0",
        "signer_capability_offer": {
          "for": {
            "vec": []
          }
        }
      }
    }
  ]
}
                                                                                                                                              

Code/Aptos/hello_aptos via ğŸ…’ base took 2.5s
âœ
aptos account fund-with-faucet --account 0xee6c038b66df7ed8aa91eb700938003ce29647f402c090ededd89b87a3c70e35
{
  "Result": "Added 100000000 Octas to account 0xee6c038b66df7ed8aa91eb700938003ce29647f402c090ededd89b87a3c70e35"
}
                                                                                                                                              

Code/Aptos/hello_aptos via ğŸ…’ base took 2.8s
âœ
touch StudyAptosNotes.md
                                                                                                                                              

Code/Aptos/hello_aptos via ğŸ…’ base
âœ
open -a Typora StudyAptosNotes.md
                                                                                                                                              


Code/Aptos/hello_aptos via ğŸ…’ base
âœ
ls
StudyAptosNotes.md assets

Code/Aptos/hello_aptos via ğŸ…’ base
âœ
ls -a
.                  ..                 .aptos             StudyAptosNotes.md assets

Code/Aptos/hello_aptos via ğŸ…’ base
âœ
cd .aptos/

Aptos/hello_aptos/.aptos via ğŸ…’ base
âœ
ls
config.yaml

Aptos/hello_aptos/.aptos via ğŸ…’ base
âœ
c
```

<https://aptos.dev/en/build/cli/install-cli/install-cli-mac>
<https://www.youtube.com/watch?v=_EFoVYcrbiY>
<https://plugins.jetbrains.com/plugin/14721-move-on-aptos>
<https://move-developers-dao.gitbook.io/aptos-move-by-example>
<https://marketplace.visualstudio.com/items?itemName=movingco.move-analyzer-plus>
<https://www.youtube.com/watch?v=87eeYsstBD4>

### 2024.09.08

[idea é…ç½® aptos](https://docs.pontem.network/02.-move-language/intellij_ide_extension)

åˆ›å»ºé¡¹ç›®

```bash
mkdir hello_optos
cd hello_aptos
```

åˆå§‹åŒ–é¡¹ç›®

```bash
aptos move init --name hello_aptos
```

åˆå§‹åŒ–è´¦æˆ·

```shell
aptos init
```

ç¼–è¯‘

```shell
aptos move compile
```

æµ‹è¯•

```shell
aptos move test
```

éƒ¨ç½²

```shell
aptos move publish --named-address hello_aptos
âœ aptos move publish --named-addresses my_addrx=3b551727cac1bd5dc45023b869c9e37dd9e1830fc02ffe32f19597a668ba906d
```

è¿è¡Œ

```shell
aptos move run --function-id 0x1::hello_aptos::greet --args "hello"
```

### 2024.09.09

Move è¯­è¨€ä¸å˜é‡
å˜é‡æ˜¯ä»€ä¹ˆï¼Ÿ
å˜é‡æ˜¯å­˜å‚¨æ•°æ®å€¼çš„å®¹å™¨ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨å’Œæ“ä½œæ•°æ®ã€‚åœ¨ Move è¯­è¨€ä¸­ï¼Œå˜é‡å¯ä»¥ç”¨æ¥å­˜å‚¨æ•´æ•°ã€å¸ƒå°”å€¼ã€å­—ç¬¦ä¸²ç­‰æ•°æ®ç±»å‹ã€‚
å˜é‡ï¼šæ˜¯æœ‰åå­—çš„å¯¹è±¡
å¯¹è±¡ï¼šå­˜å‚¨æŸä¸ªç±»å‹å€¼çš„å†…å­˜åŒºåŸŸ
å€¼ï¼šæŒ‰ç…§ç±»å‹è¿›è¡Œè§£é‡Šçš„bytesé›†åˆ
ç±»å‹ï¼šå®šä¹‰å¯èƒ½å€¼çš„æ“ä½œ
ç±»å‹ç³»ç»Ÿï¼šå®šä¹‰ç±»å‹å’Œå€¼ä¹‹é—´çš„å…³ç³»
å€¼ç±»å‹æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ
å€¼ç±»å‹ï¼Œæ„ä¸ºç®€å•çš„ç±»å‹ï¼Œå…¶ä¸»è¦ç‰¹å¾æ˜¯æ•°é‡é‡è¾ƒå°ï¼Œå¸¸è§æœ‰ä»¥ä¸‹ç±»å‹ï¼š
å¸ƒå°”ç±»å‹
æ•´æ•°
æµ®ç‚¹æ•°
æšä¸¾
å­—ç¬¦ä¸²
å †ç±»å‹å€¼çš„æŒ‡å‘
...

å¼•ç”¨ç±»å‹æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ
å¼•ç”¨ç±»å‹ï¼Œæ„ä¸ºå¤æ‚ç±»å‹ï¼Œå…¶ä¸»è¦ç‰¹å¾æ˜¯æ•°é‡é‡è¾ƒå¤§ï¼Œå¸¸è§æœ‰ä»¥ä¸‹ç±»å‹ï¼š
ç»“æ„ä½“
æ•°ç»„
å‘é‡
å‡½æ•°
æ¨¡å—
å¯¹è±¡
ç±»
...

Move è¯­è¨€ä¸­çš„å˜é‡æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ
Move è¯­è¨€ä¸­çš„å˜é‡åˆ†ä¸ºå€¼ç±»å‹å˜é‡å’Œå¼•ç”¨ç±»å‹å˜é‡ï¼Œå®ƒä»¬çš„å­˜å‚¨æ–¹å¼æœ‰æ‰€ä¸åŒã€‚
å€¼ç±»å‹å˜é‡ï¼šç›´æ¥å­˜å‚¨åœ¨æ ˆä¸Šï¼Œä¸éœ€è¦é¢å¤–çš„å†…å­˜åˆ†é…ã€‚
å¼•ç”¨ç±»å‹å˜é‡ï¼šå­˜å‚¨åœ¨å †ä¸Šï¼Œéœ€è¦é€šè¿‡å¼•ç”¨æ¥è®¿é—®ã€‚

å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹çš„å…³ç³»
é€šå¸¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡ä¸ºå¯¹è±¡æ—¶ï¼Œå…¶å¯¹è±¡çš„å€¼å­˜å‚¨åœ¨å †ä¸Šï¼Œå…¶å †å†…å­˜çš„ç´¢å¼•å­˜å‚¨åœ¨æ ˆä¸Šï¼Œç”¨æ ˆä¸Šçš„ç´¢å¼•æŒ‡å‘å †ä¸Šå­˜å‚¨çš„å¼•ç”¨ç±»å‹æ•°æ®ã€‚

Move çš„æ ¸å¿ƒå·®å¼‚ä¹‹ä¸€
åœ¨å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹å…³ç³»ä¸Šï¼Œä¸åŒäºå…¶ä»–è¯­è¨€çš„ç´¢å¼•æ–¹å¼ã€‚è€Œæ˜¯ä»¥â€œæ‰€æœ‰æƒâ€æ¥ä½œä¸ºå¼•ç”¨ç±»å‹çš„æ“ä½œã€‚

1. æ‰€æœ‰æƒåªèƒ½åŒæ—¶ç”± 1 â€œäººâ€ æ‹¥æœ‰
2. æ‰€æœ‰æƒä»¥è½¬ç§»çš„å½¢å¼æµè½¬ç»™å…¶ä»–å˜é‡

è¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ

1. é¿å…å†…å­˜æ³„éœ²ï¼Œä¸åŒäºå…¶ä»–è¯­è¨€ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ä»¥å‘ŠçŸ¥ä»€ä¹ˆæ—¶å€™å¯ä»¥å›æ”¶å†…å­˜
2. æé«˜å†…å­˜ä½¿ç”¨æ•ˆç‡ï¼Œé¿å…å¯¹å¼•ç”¨ç±»å‹çš„ä¸å¿…è¦æ‹·è´
3. æ›´å¥½çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§

### 2024.09.10

UINT/ STRING/ BOOL ä¸ ADDRESS å››å¤§ç±»å‹

```rust
module 0x42::Types {
    use std::debug::print;
    use std::string;
    use std::string::{String, utf8};

    #[test]
    fun test_num() {
        let num_u8: u8 = 42; // 0~2**8-1
        let num_u8_2 = 43u8;
        let num_u8_3 = 0x2A; // hash

        let num_u256: u256 = 100_000;

        let num_sum = (num_u8 as u256) + num_u256;
        print(&num_u8);
        print(&num_u8_2);
        print(&num_u8_3);
        print(&num_u256);
        print(&num_sum);
    }

    #[test]
    fun test_bool() {
        let bool_true: bool = true;
        let bool_false: bool = false;
        print(&bool_true);
        print(&bool_false);
        print(&(bool_true == bool_false));
    }

    #[test]
    fun test_string() {
        let str: String = utf8(b"Hello, Move!");
        print(&str);
    }

    #[test]
    fun test_addr() {
        let addr: address = @0x42;
        let addr_2: address = @0x00000000000000000000000000000000000000000A;

        print(&addr);
        print(&addr_2);
    }
}

```

### 2024.09.11

APTOS-MOVE
VECTOR å‘é‡æ ¸å¿ƒç‰¹æ€§ 1
åŸºç¡€æ¦‚å¿µ
Vectorï¼ˆå‘é‡ï¼‰ç±»ä¼¼å…¶å®ƒè¯­è¨€ä¸­çš„æ•°ç»„ï¼Œ å†…éƒ¨å­˜å‚¨çš„æ˜¯åŒä¸€ç±»å‹çš„æ•°æ®ã€‚

| è¯­æ³•              | æè¿°                 |
| ----------------- | -------------------- |
| vector[]          | ç©ºæ•°ç»„               |
| vector[e1,...,en] | å…·æœ‰åŒç±»å‹å…ƒç´ çš„æ•°ç»„ |

å¢åˆ æ”¹æŸ¥åŠŸèƒ½

<https://aptos.dev/en/build/smart-contracts/book/vector>

å‡½æ•°ä¿®é¥°ç¬¦
æ ¸å¿ƒæ¦‚å¿µ
å‡½æ•°ä¿®é¥°ç¬¦æ˜¯ç”¨æ¥èµ‹äºˆå‡½æ•°ç‰¹æ®Šèƒ½åŠ›çš„ä¸€ç»„å…³é”®å­—ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç±»

- å¯è§æ€§
  - æ— Publicï¼Œç§æœ‰å‡½æ•°ï¼Œä»…é™ module å†…éƒ¨è°ƒç”¨
  - friend publicï¼Œæ¨¡å—å†…éƒ¨å‡½æ•°ï¼ŒåŒåŒ…æ¨¡å—ä¹‹é—´å¯ä»¥è°ƒç”¨
  - Publicï¼Œæ¨¡å—å…¬å¼€å‡½æ•°ï¼Œæ‰€æœ‰æ¨¡å—éƒ½å¯ä»¥è°ƒç”¨
- å…¨å±€å­˜å‚¨å¼•ç”¨
  - acquiresï¼Œå½“éœ€è¦ä½¿ç”¨ move_fromï¼Œborrow_globalï¼Œborrow_global_mut è®¿é—®åœ°å€ä¸‹çš„èµ„æºçš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ acquires ä¿®é¥°ç¬¦
- é“¾ä¸‹
  - entryï¼Œä¿®é¥°åï¼Œè¯¥æ–¹æ³•å¯ç”±é“¾ä¸‹è„šæœ¬è°ƒç”¨

### 2024.09.12

APTOS-MOVE
STRUCT ç‰¹æ€§è§£è¯»
æ ¸å¿ƒæ¦‚å¿µ
Aptos Move çš„ Struct ç»“æ„ä½“ç”¨äºå­˜å‚¨ç»“æ„åŒ–æ•°æ®ã€‚Struct å¯ä»¥ç›¸äº’åµŒå¥—ï¼Œå¹¶å¯ä»¥ä½œä¸ºèµ„æºå­˜å‚¨åœ¨ç‰¹å®šåœ°å€ä¸‹ã€‚â€

1. å‘½åå¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´
2. å¯ä»¥é€šè¿‡ has å…³é”®å­—èµ‹äºˆèƒ½åŠ›

```rust
struct Person {
  ape: u8,
  birthday: u32,
}

struct People {
  people: vector<Person>,
}
```

ä¿®é¥°ç¬¦
Copy - å€¼èƒ½å¤Ÿè¢«å¤åˆ¶
Drop - å€¼å¯ä»¥åœ¨ä½œç”¨åŸŸç»“æŸæ—¶è¢«è‡ªåŠ¨æ¸…ç†
Key - å€¼å¯ä»¥ç”¨ä½œäºå…¨å±€å­˜å‚¨çš„é”® Key
Store - å€¼å¯ä»¥å­˜å‚¨åœ¨å…¨å±€å­˜å‚¨ä¸­

é™¤ Struct ç±»å‹å¤–ï¼Œå…¶ä»–çš„ç±»å‹é»˜è®¤å…·å¤‡ storeã€dropã€copy çš„èƒ½åŠ›ï¼ŒStruct æœ€ç»ˆæ˜¯å­˜å‚¨åœ¨ç”¨æˆ·çš„åœ°å€ä¸Šï¼ˆæˆ–è€…è¢«é”€æ¯ï¼‰ï¼Œä¸å­˜åœ¨ Aptos åˆçº¦é‡Œï¼ŒAptos åˆçº¦æ˜¯ä¸€ä¸ªå…¨çº¯çš„å‡½æ•°ã€‚

Drop
å€¼èƒ½å¤Ÿåœ¨ä½¿ç”¨ç»“æŸåè¢«é”€æ¯

```rust
//drop
struct Coin {
  b: bool
}

#[test]
fun test6() {
  let c = Coin { b: true }; // ä¼šæŠ¥é”™
}

//drop
struct Coin has drop {
  b: bool,
}

#[test]
fun test6() {
  let c = Coin { b: true };
}

```

copy
å€¼èƒ½å¤Ÿåœ¨ä½¿ç”¨ç»“æŸåè¢«å¤åˆ¶

```rust
//copy
struct CanCopy has drop {
  b: bool,
}

#[test]
fun test5() {
  let c = CanCopy { b: true };
  let c1 = c; // no copy
  let CanCopy { b } = &mut c1;
  *b = false;
  debug::print(&c1.b);
}
```

```rust
// copy
struct CanCopy has copy, drop {
  b: bool,
}

#[test]
fun test5() {
  let c = CanCopy { b: true };
  let c1 = c; // copy
  let CanCopy { b } = &mut c1;
  *b = false;
  debug::print(&c1.b);
  debug::print(&c.b);
}
```

Key
å€¼å¯ä»¥ç”¨ä½œäºå…¨å±€å­˜å‚¨çš„é”® Key

```rust
//key
struct Coin has key {
  value: u64,
}

public entry fun mint(account: &signer, value: u64) {
  move_to(account, Coin { value });
}

#[test(account = @0x42)]
public fun test_mint(account: &signer) acquires Coin {
  let addr = signer::address_of(account);
  mint(account, 100);
  let coin = borrow_global<Coin>(addr).value;
  debug::print(&coin);
}
```

store
å€¼å¯ä»¥è¢«å…¨å±€å­˜å‚¨ï¼Œé€šå¸¸é…åˆKeyä½¿ç”¨

```rust
//store
struct Key has key, drop {
  a: Store,
}

struct Store has store, drop {
  b: bool,
}

#[test]
fun test6() {
  let k = Key {
    a: Store { b: true },
  };
  debug::print(&k.a.b);
}
```

çˆ¶ çš„æœ‰ Key å­çš„å¿…é¡»æœ‰ stare

```rust
//store
struct Key has key, drop {
  a: Store,
}

struct Store has drop {
  b: bool,
}

#[test]
fun test6() {
  let k = Key {
    a: Store { b: true },
  };
  debug::print(&k.a.b); // ä¼šæŠ¥é”™
}
```

<https://aptos.dev/en/build/smart-contracts/book/structs-and-resources>
<https://aptos.dev/en/build/smart-contracts/book/abilities>

### 2024.09.13

å‡½æ•°æ“ä½œæµIFã€WHILEã€LOOP

```rust
module 0x42::Demo3 {
    use std::debug;

    #[test]
    fun test_if() {
        let x = 5;
        let x2 = 10;
        if (x == 5) {
            debug::print(&x);
        } else {
            debug::print(&x2);
        }
    }

    #[test]
    fun test_while() {
        let  x = 0;
        while (x < 10) {
            debug::print(&x);
            x = x + 1;
        }
    }

    #[test]
    fun test_while2() {
        let  x = 5;
        while (x < 10) {
            debug::print(&x);
            x = x + 1;

            if (x == 7) {
                break;
            }
        }
    }

    #[test]
    fun test_while3() {
        let  x = 5;
        while (x < 10) {
            x = x + 1;
            if (x == 7) {
                continue;
            };
            debug::print(&x);
        }
    }

    #[test]
    fun test_loop() {
        let x = 5;
        loop {
            x = x + 1;
            if (x == 7) {
                break;
            };
            debug::print(&x);
        }
    }

    #[test]
    fun test_loop2() {
        let x = 5;
        loop {
            x = x + 1;
            if (x == 7) {
                continue;
            };
            if (x == 10) {
                break;
            };
            debug::print(&x);
        }
    }
}
```

æ¨¡å—çš„ç‰¹æ€§
å¼•ç”¨
å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼å¯¼å…¥æ¨¡å—ï¼Œç”¨æ¥æ›´å¥½çš„è¿›è¡Œç®¡ç†ã€‚æ³¨æ„å‘½åä¸èƒ½é‡å¤ã€‚

```rust
use std::debut;
use std::debug::print;
use std::debug::{print as P, native_print, print};

fun main() {
  debug::print(&v);
  print(&v);
  P(&v);
}
```

ä½œç”¨åŸŸ
å¯ä»¥åœ¨å…¨å±€å®šä¹‰ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨ï¼Œåªåœ¨æ‰€åœ¨çš„ä½œç”¨åŸŸå†…æœ‰æ•ˆã€‚

```rust
fun main() {
  use std::debug::print;
  print(&v);
}

public(friend) 
å£°æ˜å½“å‰æ¨¡å—ä¿¡ä»»ç”¨æ¨¡å—ï¼Œå—ä¿¡ä»»æ¨¡å—å¯ä»¥è°ƒç”¨å½“å‰æ¨¡å—ä¸­å…·æœ‰ public(friend) çš„å¯è§æ€§å‡½æ•°

public
å£°æ˜å½“å‰æ¨¡å—å¯¹å¤–ä¾›å…¶ä»–æ¥å£è°ƒç”¨çš„æ–¹æ³•ã€‚

entry
å£°æ˜å¯è¢«é“¾ä¸‹è°ƒç”¨çš„æ¨¡å—æ–¹æ³•ã€‚

æ¨¡å—çš„å‘å¸ƒä¸äº¤äº’
å‘å¸ƒæµç¨‹
1. é…ç½®è´¦æˆ·ï¼Œå¹¶ä¸ºå…¶å‘é€ gas
  å¯ä»¥é€šè¿‡ aptos init æ¥åˆå§‹åŒ–ä¸€ä¸ªè´¦æˆ·ã€‚
2. ç¼–è¯‘å¹¶æµ‹è¯•æ¨¡å—
  å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥ç¼–è¯‘
  aptos move compile --named-addresses hello_blockchain=default
3. å‘å¸ƒæ¨¡å—
  aptos move publish --named-addresses hello_blockchain=default

äº¤äº’æµç¨‹
1. åŒºå—é“¾æµè§ˆå™¨
  https://explorer.aptoslabs.com/
2. ç»ˆç«¯
  aptos move run --function-id 'default::message::set_message' --args 'string:hello, blockchain'

3. SDK
  https://aptos.dev/en/build/sdks

### 2024.09.14

è®¤è¯† OBJECT
ä»€ä¹ˆæ˜¯ Aptos objectï¼Ÿ
1. å¯¹è±¡æ˜¯å•ä¸ªåœ°å€çš„èµ„æºå®¹å™¨ï¼Œç”¨äºå‚¨å­˜èµ„æº
2. å¯¹è±¡æä¾›äº†ä¸€ç§é›†ä¸­å¼èµ„æºæ§åˆ¶ä¸æ‰€æœ‰æƒç®¡ç†çš„æ–¹æ³•

åˆ›å»ºå¹¶è½¬ç§»å¯¹è±¡å®ä¾‹
æˆ‘ä»¬å¯ä»¥é€šè¿‡ aptos_framework åº“ä¸‹çš„ object æ¥å®ç°å¯¹è±¡çš„åŠŸèƒ½ã€‚
```rust
module my_addr::object_playground {
  use std::signer;
  use aptos_framework::object::{self, ObjectCore};

  entry fun create_and_transfer(caller: &signer, destination: address) {
    // Create object
    let caller_address = signer::address_of(caller);
    let constructor_ref = object::create_object(caller_address);

    // Set up the object

    // Transfer to destination
    let object = object::object_from_constructor_ref<ObjectCore>(&constructor_ref);
    object::transfer(caller, object, destination);
  }
}
```

ä¸¤ç±»å¯¹è±¡
å¯åˆ é™¤æ™®é€šå¯¹è±¡
ä¸å¯åˆ é™¤å¯¹è±¡

- å‘½åå¯¹è±¡ï¼Œé€šè¿‡å›ºå®šçš„ signer å’Œç‰¹å®šçš„ seed ç”Ÿæˆå”¯ä¸€åœ°å€çš„å¯¹è±¡ï¼Œ1ä¸ªåœ°å€åªèƒ½ç”Ÿæˆ1ä¸ª
- ç²˜æ€§å¯¹è±¡ï¼Œé€šè¿‡ signer ç”Ÿæˆçš„å¯¹è±¡ï¼Œ1ä¸ªåœ°å€å¯ä»¥ç”Ÿæˆå¤šä¸ª
  
### 2024.09.15

OBJECT é…ç½®ä¸ä½¿ç”¨
object æœ‰å“ªäº›é…ç½®ï¼Ÿ

1. æ‰©å±•å¯¹è±¡ï¼šå°†å¯¹è±¡å˜æˆå¯åŠ¨æ€é…ç½®çš„ï¼Œå¯ä»¥å¾€é‡Œé¢æ·»ç½®æ–°çš„ Struct èµ„æº
2. è½¬ç§»ç®¡ç†ï¼šå¯ä»¥å¼€å¯æˆ–è€…ç¦ç”¨ object transfer åŠŸèƒ½
3. å—æ§è½¬ç§»ï¼šä»…å¯ä½¿ç”¨ä¸€æ¬¡è½¬ç§»åŠŸèƒ½
4. å…è®¸åˆ é™¤ï¼šå…è®¸åˆ é™¤å¯¹è±¡

### 2024.09.16

DApp(Decentralized Application)

- ä¸(Centralized) App çš„å·®å¼‚
  - èµ„äº§çš„æ‰€æœ‰æƒ
  - è¿è¡Œåœ¨åŒºå—é“¾ä¸Š
- å®¢æˆ·ç«¯ + æ™ºèƒ½åˆçº¦
  - Web browser / iOS / Android
  - Move Language Smart Contracts

JavaScript / TypeScript

- Javascript åŸºç¡€
  - <https://developer.mozilla.org/en-US/docs/Web/JavaScript>

- Typescript å®˜ç½‘
  <https://www.typescriptlang.org/docs/>
  <https://www.typescriptlang.org/docs/handbook/typescript-from-scratch.html>
- Typescript Playground
  
DApp åŸºæœ¬ä¸šåŠ¡æµç¨‹

- å°† DAPP ä¸é’±åŒ…ç›¸è¿æ¥
- æŸ¥çœ‹å½“å‰è´¦å·ä¿¡æ¯
- ä¸åˆçº¦äº¤äº’
- è·å–åˆçº¦å†…çš„æ•°æ®

### 2024.09.17

å¦‚ä½•ä¸ Aptos é“¾äº¤äº’
åŒºå—é“¾æ˜¯ä¸ªæ•°æ®åº“

- CRUD
- æ•°æ®æäº¤ï¼šTransaction æäº¤
- æ•°æ®æŸ¥è¯¢ï¼šæŸ¥è¯¢é“¾ä¸Šæ•°æ®
- æäº¤ Transaction æœ‰å‡ ç§æ–¹æ³•ï¼Ÿ

Transaction æäº¤

- Aptos CLI
  - aptos move run
- åœ¨æµè§ˆå™¨ç›´æ¥æäº¤
  - <https://explorer.aptoslabs.com/>
  - Mainnet/Testnet/Devnet çš„åŒºåˆ«ï¼Ÿ
- ä½¿ç”¨ SDK <https://aptos.dev/en/build/sdks>
  - Rust
  - Python
  - TypeScript
  - ...
- Gas fee

é“¾ä¸Šæ•°æ®æŸ¥è¯¢ - FullNode

- ä»€ä¹ˆæ˜¯ FullNode(FN)
  - æä¾› Restful API
  - <https://fullnode.devnet.aptoslabs.com/v1/spec#/>
  - <https://fullnode.testnet.aptoslabs.com/v1/spec#/>
- view Function
  - ä»€ä¹ˆæ˜¯ view Function
  - CLI + SDK
  - æµè§ˆå™¨
- é“¾ä¸Šæ•°æ®æŸ¥è¯¢ - Indexer
  - ä»€ä¹ˆæ˜¯ Indexer
  - ä¸ºä»€ä¹ˆéœ€è¦ Indexer
    - åŒºå—é“¾æ˜¯ä¸€ä¸ª æ—¥å¿—å‹æ•°æ®åº“
    - èšåˆå’ŒåæŸ¥éœ€æ±‚æ˜¯éå¸¸å¸¸è§çš„
  - GraphQL

é“¾ä¸Šæ•°æ®æŸ¥è¯¢ - GraphQL

- ä¸€ç§å£°æ˜å¼çš„æŸ¥è¯¢è¯­è¨€ï¼Œå¯¹æ ‡ Restful
- æ¥è‡ª Facebook
- ä¼˜ç‚¹ï¼š
  - æ‰€å–å³æ‰€å¾—ï¼Œç²¾å‡†è·å–
  - å…·æœ‰ç±»å‹ç³»ç»Ÿï¼Œå¯ä»¥é¿å…å¾ˆå¤šé”™è¯¯
  - è§£æ”¾å‰åç«¯ï¼Œå‰ç«¯å¯ä»¥è‡ªå·±å®šä¹‰æŸ¥è¯¢ï¼Œåç«¯åªéœ€è¦æä¾›æ¥å£
- ç¼ºç‚¹ï¼š
  - å­¦ä¹ æ›²çº¿é™¡å³­
  - ä¸ç›´è§‚ï¼Œå·¥å…·æ”¯æŒå°‘
  - æ€§èƒ½ç“¶é¢ˆ
  - å®‰å…¨é£é™©
<https://aptos.dev/en/build/indexer/aptos-hosted>
<https://aptos.dev/en/build/indexer/self-hosted>

å¸¸è§å¼€å‘èŒƒå¼

- å‰ç«¯ - åˆçº¦
- å‰ç«¯ - åˆçº¦ - Indexer
- åç«¯å‘¢ï¼Ÿ
æœ€ä½³å®è·µ
- æ•°æ®æµå®šä¹‰å…ˆè¡Œ
- å¹‚ç­‰ å®ç°å¾ˆé‡è¦
- å¥¥å¡å§†å‰ƒåˆ€-æ…é‡å¼•å…¥åç«¯

éšæœºæ€§

1. é“¾ä¸ŠåŸç”Ÿæ–¹æ³•
2. é“¾å¤–å¼•å…¥
3. ä¼ªéšæœº

Mint å‘å”®çš„è¦ç´ 

1. æ”¯ä»˜
2. é“¸é€ 
3. å¼€å…³(æ—¶é—´)
4. ç›²ç›’

### 2024.09.18

object::ExtendRef
ç†è§£ä¸º object çš„ signer
æŠŠ object ç†è§£ä¸ºä¸€ä¸ª account
æœ‰ object signer æ‰èƒ½ move to å­˜å‚¨ struct
extendRef ä¸ºäº† signer è¿™ä¸ªå¯ä»¥è¢«åˆçº¦ç®¡ç†ï¼ŒæŠ½è±¡å‡ºæ¥ä¸€ä¸ª Ref ï¼Œå¯ä»¥ç”¨æ¥è·å¾— object signer
ExtendRef ç±»å‹å¯ä»¥ç”Ÿæˆ å¯¹åº”å†…éƒ¨ Object åœ°å€çš„ Signer ç±»å‹çš„å®ä¾‹
signer åªæœ‰ drop èƒ½åŠ›ï¼Œä¸èƒ½ store

Creating an Object involves two steps:

Creating the ObjectCore resource group (which has an address you can use to refer to the Object later).
Customizing how the Object will behave using permissions called Refs.

### 2024.09.19

entry æ–¹æ³•è°ƒç”¨è€…æ˜¯ é’±åŒ…åœ°å€ ä¹Ÿæ˜¯ signer
åˆçº¦åœ¨å‘å¸ƒçš„æ—¶å€™å†…éƒ¨å»è°ƒç”¨çš„ï¼Œ å®ƒåªèƒ½è‡ªå·±å»åˆå§‹åŒ–ï¼Œä¸èƒ½è¢«å¤–éƒ¨è°ƒç”¨ï¼Œ init_mode signer æ˜¯åˆçº¦
Move.toml æ˜¯ Move é¡¹ç›®ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œè´Ÿè´£ç®¡ç†ä¾èµ–é¡¹å’Œåœ°å€ã€‚å¯¹äºåƒ @contract å’Œ @user è¿™æ ·çš„å‘½ååœ°å€ï¼Œä½ éœ€è¦åœ¨ Move.toml æ–‡ä»¶ä¸­é€šè¿‡ [addresses] æˆ– [dev-addresses] éƒ¨åˆ†æŒ‡å®šä¸€ä¸ªå®é™…çš„å€¼ã€‚å¦åˆ™ï¼ŒMove ç¼–è¯‘å™¨å°†æ— æ³•è§£æè¿™äº›åœ°å€ï¼Œå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚

å½“ä½ åœ¨ä»£ç ä¸­ä½¿ç”¨åƒ @contract æˆ– @user è¿™æ ·çš„å‘½ååœ°å€æ—¶ï¼Œè¿™äº›åœ°å€å¿…é¡»åœ¨ Move.toml æ–‡ä»¶ä¸­é€šè¿‡ [addresses] å£°æ˜ä¸€ä¸ªå®é™…çš„åœ°å€å€¼ã€‚åŸå› å¦‚ä¸‹ï¼š

 1. å‘½ååœ°å€çš„è§£æï¼šMove è¯­è¨€å…è®¸ä½ ä½¿ç”¨å‘½ååœ°å€ï¼ˆå¦‚ @contractï¼‰æ¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç§»æ¤æ€§ã€‚è¿™äº›å‘½ååœ°å€å¹¶ä¸ç›´æ¥å¯¹åº”é“¾ä¸Šçš„æŸä¸ªå…·ä½“åœ°å€ï¼Œå®ƒä»¬åªæ˜¯å ä½ç¬¦ã€‚ä½ éœ€è¦åœ¨ Move.toml æ–‡ä»¶ä¸­å°†è¿™äº›å‘½ååœ°å€æ˜ å°„åˆ°å…·ä½“çš„é“¾ä¸Šåœ°å€ã€‚
 2. ç¼–è¯‘å™¨è¦æ±‚ï¼šMove ç¼–è¯‘å™¨éœ€è¦çŸ¥é“æ‰€æœ‰å‘½ååœ°å€çš„å®é™…å€¼æ‰èƒ½æ­£å¸¸ç¼–è¯‘ä»£ç ã€‚Move.toml æ–‡ä»¶çš„ [addresses] éƒ¨åˆ†ç”¨äºå£°æ˜è¿™äº›åœ°å€çš„å®é™…å€¼ï¼Œæˆ–è€…åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨ [dev-addresses] æ¥ç”Ÿæˆä¸´æ—¶çš„å¼€å‘åœ°å€ã€‚

### 2024.09.20

token::create_named_token
token::create
<https://aptos.dev/zh/build/apis>

```rust
module red_packet::red_packet {
    use aptos_framework::fungible_asset::{Self, MintRef, TransferRef, BurnRef};
    use aptos_framework::object::{Self, Object};
    use aptos_framework::primary_fungible_store;
    use std::signer;
    use std::string::utf8;
    use std::option;

    #[test_only]
    use aptos_framework::account;

    const SEED: vector<u8> = b"RedPacketFA";

    struct MyMintRef has key {
        admin: address,
        mint_ref: MintRef
    }

    struct MyTransferRef has key {
        transfer_ref: TransferRef
    }

    struct MyBurnRef has key {
        burn_ref: BurnRef
    }

    fun init_module(admin: &signer) {
        let constructor_ref = object::create_named_object(admin, SEED);

        primary_fungible_store::create_primary_store_enabled_fungible_asset(
            &constructor_ref,
            option::none(),
            utf8(b"RedPacketFA Coin"),
            utf8(b"RPFA"),
            8,
            utf8(b"https://aptos.dev/docs/aptos-black.svg"),
            utf8(b"https://github.com/qiaopengjun5162")
        );

        let mint_ref = fungible_asset::generate_mint_ref(&constructor_ref);

        let transfer_ref = fungible_asset::generate_transfer_ref(&constructor_ref);

        let burn_ref = fungible_asset::generate_burn_ref(&constructor_ref);

        move_to(
            admin,
            MyMintRef { admin: signer::address_of(admin), mint_ref }
        );

        move_to(admin, MyBurnRef { burn_ref });

        move_to(admin, MyTransferRef { transfer_ref });
    }

    entry fun mint(sender: &signer, amount: u64) acquires MyMintRef {
        let my_mint_ref = borrow_global<MyMintRef>(@red_packet);
        let fa = fungible_asset::mint(&my_mint_ref.mint_ref, amount);
        primary_fungible_store::deposit(signer::address_of(sender), fa);
    }

    /// Check if the given signer is the admin.
    public fun is_owner(owner: &signer): bool acquires MyMintRef {
        let my_mint_ref = borrow_global<MyMintRef>(@red_packet);
        return my_mint_ref.admin == signer::address_of(owner)
    }

    #[view]
    /// Get the balance of `account`'s primary store.
    public fun balance<T: key>(account: address, metadata: Object<T>): u64 {
        primary_fungible_store::balance(account, metadata)
    }

    #[view]
    public fun is_balance_at_least<T: key>(
        account: address, metadata: Object<T>, amount: u64
    ): bool {
        primary_fungible_store::is_balance_at_least(account, metadata, amount)
    }

    #[test]
    fun test() acquires MyMintRef {
        let user_signer = account::create_account_for_test(@red_packet);
        init_module(&user_signer);

        let user1_signer = account::create_account_for_test(@0x12345);
        mint(&user1_signer, 1 * 1000 * 1000 * 100);
    }
}

```

### 2024.09.21

<https://www.youtube.com/watch?v=bny8hBEpBmw>
Resource Group & Object Model

Resource Group
åº•å±‚å­˜å‚¨ç³»ç»Ÿ
æ›´ä¼˜åŒ–çš„ä½¿ç”¨å­˜å‚¨ç³»ç»Ÿï¼Œ èŠ‚çœgasè´¹
ledger å®Œå…¨äºŒå‰æ ‘  Transaction å¶å­èŠ‚ç‚¹ Merkle Tree å…±è¯†
tree é“¾  è¯æ˜ ç¼ºç‚¹ ä¸­é—´èŠ‚ç‚¹
åŒºå—çš„æ¦‚å¿µåªå­˜åœ¨äºå…±è¯†
Transaction hash + çŠ¶æ€æ ‘ +  Event Tree = TransactionInfo
key = Hash(Account address, Access path)
Value = Serialized byte array
resource_group module address global
Only struct and fun can have attributes
æ‰‹åŠ¨è°ƒæ•´ Gas Cost

Flow of Object Creation

```rust
// 1. Create ConstructorRef
let object_cref: ConstructorRef = object::create_object(aaron_address);
let object_signer = generate_signer(&object_cref);
move_to(&object_signer, X {});
```

object convert
æœ‰äº› object æ˜¯ä¸èƒ½è¢«åˆ é™¤çš„
Move
ç±»å‹ç³»ç»Ÿ

- å°†ä¸€ä¸ªè¯­è¨€ä¸­æ‰€æœ‰èƒ½è¡¨è¾¾çš„å€¼åˆ†ç±»æˆä¸€ä¸ªä¸ªå­é›†
- è°ƒç”¨çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡è§„å®šå®ç°æ–¹åªèƒ½æ¥å—å“ªç§å­é›†
ä¼ ç»Ÿè¯­è¨€ç»“æ„
- è¯­è¨€
- ç¼–è¯‘å™¨
- æ‰§è¡Œç  LLVM jvm
ç¼–è¯‘å™¨å®Œæˆç±»å‹æ£€æŸ¥
- é™æ€æ£€æŸ¥ä¿è¯ç±»å‹æ­£ç¡®
- è¿è¡Œæ—¶ä¸å†æ£€æŸ¥
- æ‰€ä»¥å­—èŠ‚ç ä¸éœ€è¦ä¿ç•™ç±»å‹ä¿¡æ¯
æ™ºèƒ½åˆçº¦ä¸åŒäºä¼ ç»Ÿç¨‹åº
- åˆçº¦è°ƒç”¨æ–¹è¢«è°ƒç”¨æ–¹ä¸ä¸€å®šç”±åŒä¸€ä½œè€…å®Œæˆ
- ä¸ºä»€ä¹ˆ Solidity ä¸­æ²¡æœ‰ç»“æ„ä½“å‘¢ï¼Ÿ
Move ä¸åŒäº Solidity
- å­—èŠ‚ç ä¸­ä¿ç•™äº†ç±»å‹ä¿¡æ¯
- ä¸Šé“¾ä»£ç ä¿è¯äº’ç›¸çš„ç±»å‹å®‰å…¨

### 2024.09.22

<https://www.youtube.com/watch?v=wlbHrHtvyIk>
åœ¨ Aptos ä¸Šå®ç°ç®€å•çš„ NFT å¸‚åœº
äº¤æ˜“å¸‚åœºçš„å®ç°é€»è¾‘
ç›®æ ‡ï¼šè¦å®ç°ä¸€ä¸ªç®€å•çš„ NFT å¸‚åœº
é¦–å…ˆè¦è€ƒè™‘ï¼š

1. NFTå­˜æ”¾åœ¨å“ªé‡Œ
2. æŒ‚å•çš„ä¿¡æ¯å­˜æ”¾åœ¨å“ªé‡Œ
3. ç”¨æˆ·å¦‚æœè´­ä¹°/å–æ¶ˆ

#### ç”¨æˆ·å¯ä»¥æŒ‚å•/ å–æ¶ˆ/ è´­ä¹°NFT

#### 1. NFTå­˜æ”¾åœ¨å“ªé‡Œ

   NFT æ˜¯å¯ä»¥å­˜å‚¨èµ·æ¥çš„

- Table
- Vector
  NFT å­˜æ”¾åœ¨ç”¨æˆ·çš„èµ„æºä¸‹
  ç”¨ Table ä¿å­˜æ‰€æœ‰æŒ‚å•çŠ¶æ€çš„NFT

```rust
struct Token has store {
  id: TokenId,
  amount: u64,
}
```

#### 2. æŒ‚å•çš„ä¿¡æ¯å­˜æ”¾åœ¨å“ªé‡Œ

   ç”¨æˆ·æŒ‚å•æ—¶éœ€è¦è¾“å…¥

1. æŒ‚å•çš„NFT çš„ TokenId
2. æ•°é‡å’Œä»·æ ¼
   å¦‚æœå°†è¿™äº›ä¿¡æ¯å­˜å‚¨èµ·æ¥

#### 3. ç”¨æˆ·å¦‚ä½•è´­ä¹°å’Œå–æ¶ˆ

è´­ä¹°ï¼š

- éœ€è¦çŸ¥é“æŒ‚å•è€…çš„åœ°å€
- éœ€è¦çŸ¥é“æŒ‚å• Token Id ä»¥åŠä»·æ ¼
å–æ¶ˆï¼š
- å¿…é¡»æ˜¯è‡ªå·±çš„æŒ‚å•
- éœ€è¦çŸ¥é“æŒ‚å• Token Id

ä¸ºä»€ä¹ˆéœ€è¦çŸ¥é“æŒ‚å•è€…çš„åœ°å€
åˆçº¦çš„å­˜å‚¨ç»“æ„
æŒ‚å•è€… NFT TokenStoreEscrow  å–å‡ºNFT  è´­ä¹°è€…
æŒ‚å•è€… æŒ‚å•ä¿¡æ¯ TokenListings æŸ¥çœ‹æŒ‚å•ä¿¡æ¯æ£€æŸ¥å¦‡ç§‘ è´­ä¹°è€…

ä»£ç è¯¦è§£

- äº¤æ˜“å¸‚åœºçš„å®ç° Listing
ç»„åˆ Token Id
å–å‡ºè¦æŒ‚å•çš„NFT
å–å®¶æ˜¯å¦æŒ‚è¿‡å•ï¼Œæ²¡æœ‰åˆ™å‘æ”¾ä¸€ä¸ªæŒ‚å•é›†åˆçš„ç»“æ„
å°† NFT æ”¾å…¥æŒ‚å•é›†åˆç»“æ„ä¸­
å°†æŒ‚å•ä¿¡æ¯å­˜æ”¾åˆ° Table

- äº¤æ˜“å¸‚åœºçš„å®ç° Cancel
ä»å…¨å±€å­˜å‚¨ä¸­æ‰¾åˆ°è‡ªå·±çš„æŒ‚å•ä¿¡æ¯é›†åˆ
ç»„åˆ Token Id
åˆ¤æ–­æ˜¯å¦æœ‰æŒ‚å•çŠ¶æ€
åˆ é™¤æŒ‚å•ä¿¡æ¯
ä»å…¨å±€å­˜å‚¨ä¸­æ‰¾åˆ°è‡ªå·±çš„æŒ‚å• NFT é›†åˆ
åˆ¤æ–­æ˜¯å¦æœ‰è¿™ä¸ª NFT
å–å‡ºNFT
å°†NFT æ”¾å…¥é’±åŒ…

- äº¤æ˜“å¸‚åœºçš„å®ç° Buy
ç»„åˆ Token Id
ä»å…¨å±€å­˜å‚¨ä¸­æ‰¾åˆ°å–å®¶çš„æŒ‚å•ä¿¡æ¯é›†åˆ
æ£€æŸ¥é‡‘é¢æ˜¯å¦å……è¶³
ä»å…¨å±€å­˜å‚¨ä¸­æ‰¾åˆ°å–å®¶çš„æŒ‚å• NFT é›†åˆ
æ£€æŸ¥è´­ä¹°çš„é‡‘é¢æ˜¯å¦æ»¡è¶³
æ£€æŸ¥æŒ‚å•çš„ NFTçš„æ•°é‡æ˜¯å¦æ»¡è¶³
å–å‡ºNFT
å°† NFT å‘é€åˆ°ä¹°å®¶é’±åŒ…
å°†è´­ä¹°çš„é‡‘é¢å‘é€åˆ°å–å®¶é’±åŒ…
å¦‚æœä¹°ç©ºåˆ™é”€æ¯æŒ‚å•ä¿¡æ¯

mint_ref å°±æ˜¯é“¸å¸æƒ
çœ‹ä½ æ€ä¹ˆç”¨å®ƒ
mint_ref ç†è§£ä¸ºä¸€ä¸ªå®ä½“ï¼Œä¸€æŠŠé’¥åŒ™ï¼Œè¿™ä¸ªé’¥åŒ™åªèƒ½å¼€ Mint() è¿™ä¸ªå‡½æ•°
ä½ çš„åˆçº¦è¦åšçš„å°±æ˜¯æŠŠè¿™ä¸ªé’¥åŒ™æ‰¾ä¸€ä¸ªä½ç½®æ”¾èµ·æ¥

è‡³äºè¿™æŠŠé’¥åŒ™

- æ”¾åœ¨é—¨å£åœ°å«ä¸‹é¢ï¼ˆæ¯ä¸ªäººéƒ½èƒ½æ‹¿åˆ°ï¼‰
- æ”¾åœ¨è‡ªå·±èº«ä¸Š ï¼ˆè‡ªå·±èƒ½æ‹¿åˆ°ï¼‰
- æ”¾åœ¨é“¶è¡Œä¿é™©æŸœ ï¼ˆè‡ªå·±ä¹Ÿæ‹¿ä¸åˆ°ï¼‰

æ˜¯åˆçº¦è¦å®ç°çš„é€»è¾‘
Token çš„å…ƒæ•°æ®æ˜¯ Object<Metadata> ï¼ŒFA çš„å®ä½“æ˜¯ FungibleAsset
Object<Metadata> ç›¸å½“äº Solidity ä¸­çš„ Token åœ°å€
FungibleAsset  æ˜¯å®ä¾‹ã€èµ„æºã€çº¸å¸çš„å®ä½“ï¼Œä¸ä»…ä»…æ˜¯æ•°å­—

### 2024.09.23

[pontem](https://playground.pontem.network/)
<https://www.youtube.com/watch?v=r9KDv-_j16A>
Aptosï¼šMove è¯­è¨€åˆæ¢
ç›®å½•

- Move èµ·æº
- ç°ä»Šæ™ºèƒ½åˆçº¦çš„é—®é¢˜
- Move çš„æ”¹å–„
- Demo

Move èµ·æº

- Moveæ˜¯ä¸€ç§åŸºäº Rust çš„è¯­è¨€
- èµ·åˆæ˜¯ä¸“é—¨ä¸º Meta çš„åŒºå—é“¾é¡¹ç›® Diem å¼€å‘çš„
- ç›®çš„æ˜¯éœ€è¦ä¸€ç§å¯ä»¥ç²¾å‡†æè¿°èµ„äº§çš„è¯­è¨€
- æ„¿æ™¯æ˜¯å¸Œæœ›æˆä¸ºåŒºå—é“¾è¯­è¨€çš„ JavaScript

èµ„äº§å®šä¹‰
ç¨€ç¼ºæ€§
åº”æ§åˆ¶ç³»ç»Ÿä¸­çš„èµ„äº§ä¾›åº”ï¼Œå¤åˆ¶ç°æœ‰èµ„äº§åº”å½“è¢«ç¦æ­¢ï¼Œä¸”åˆ›å»ºæ–°èµ„äº§åº”è¯¥ä¸ºä¸€ç§ç‰¹æƒ
èµ„äº§æ‰€æœ‰æƒçš„æƒé™ç®¡ç†
ç³»ç»Ÿä¸­çš„å‚ä¸è€…èµ„äº§åº”è¯¥èƒ½å—åˆ°èµ„äº§æ§ç®¡æ¡ä¾‹çš„ä¿æŠ¤
ç°ä»Šæ™ºèƒ½åˆçº¦çš„é—®é¢˜
ç¨€ç¼ºæ€§æ˜¯ä¸å¯æ‰©å±•çš„

- åŸç”Ÿä»£å¸çš„ç¨€ç¼ºæ€§ï¼šåŒºå—é“¾çš„åŸç”Ÿä»£å¸ï¼ˆETH...ï¼‰é€šå¸¸å…·æœ‰å†…å»ºçš„ç¨€ç¼ºæ€§æœºåˆ¶
- æ™ºèƒ½åˆçº¦ä»£å¸çš„é—®é¢˜ï¼šä½†è¿™ç§ç¨€ç¼ºæ€§æ— æ³•ç›´æ¥æ‰©å±•åˆ°åŸºäºæ™ºèƒ½åˆçº¦åˆ›å»ºçš„ä»£å¸ï¼ˆå¦‚ ERC-20 ä»£å¸ï¼‰
- æ‰‹åŠ¨å®ç°çš„é£é™©ï¼šå¼€å‘è€…å¿…é¡»æ‰‹åŠ¨å®ç°ç¨€ç¼ºæ€§é€»è¾‘ï¼Œè¿™å¢åŠ äº†å‡ºé”™å’Œå®‰å…¨æ¼æ´çš„é£é™©

```rust
function transfer(address to, uint256 amount) public {
    require(balance[msg.sender] >= amount, "Insufficient balance");
    balance[msg.sender] -= amount;
    balance[to] += amount * 2; // æ¥æ”¶è€…è·å¾—ä¸¤å€æ•°é‡ï¼Œè¿æ³•ç¨€ç¼ºæ€§
}
```

èµ„äº§æ‰€æœ‰æƒ

- èµ„äº§ä¸å­˜åœ¨ç”¨æˆ·çš„é’±åŒ…ä¸­ï¼Œè€Œæ˜¯é€è¿‡æ™ºèƒ½åˆçº¦çš„çŠ¶æ€åˆ†é…
é‡å…¥æ”»å‡»(Reentrancy Attack)
- ä½ åªæœ‰ä¸€ç¬”å­˜æ¬¾ï¼Œä½†ä½ å´å¯ä»¥ææ¬¾ä¸¤æ¬¡

```rust
function withdraw(uint256 amount) public {
    require(balance[msg.sender] >= amount, "Insufficient balance");
    balance[msg.sender] -= amount;
    (bool success, ) = msg.sender.call{value: amount * 2}("");
    require(success, "Transfer failed");
}

function withdraw(uint256 amount) public {
    require(balance[msg.sender] >= amount, "Insufficient balance");
   
    (bool success, ) = msg.sender.call{value: amount }("");
    require(success, "Transfer failed");
     balance[msg.sender] -= amount;
}
```

Move çš„æ”¹å–„
èµ„æºï¼ˆResourceï¼‰å¯¼å‘

- èµ„æºä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼Œå…·æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸå’Œè§„åˆ™

```rust
struct CoinStore<phantom CoinType> has key {
  coin: Coin<CoinType>,
}

struct Coin<phantom CoinType> has store {
  value: u64,
}
```

- æ‰€æœ‰æƒæ˜ç¡®å®šä¹‰

```rust
public fun transfer_coin<CoinType> (
  from: &mut CoinStore<CoinType>,
  to: &mut CoinStore<CoinType>,
  amount: u64,
) {
  let coin = withdraw(&mut from.coin, amount);
  deposit(&mut to.coin, coin);
}
```

- ç¼–è¯‘æ—¶æ£€æŸ¥
èƒ½åŠ›å±æ€§å®šä¹‰
ability å®šä¹‰
Key å…è®¸ä¸€ä¸ªç±»å‹ç›´æ¥å­˜åœ¨äºåŒºå—é“¾ä¸Šï¼Œå¹¶ä¸”å­˜å±äºç‰¹å®šçš„è´¦æˆ·
store å…è®¸ä¸€ä¸ªå€¼è¢«å­˜å‚¨åœ¨åŒºå—é“¾çš„å…¨å±€çŠ¶æ€ä¸­æˆ–ä½œä¸ºå…¶ä»–ç»“æ„çš„ä¸€éƒ¨åˆ†
copy å…è®¸ä¸€ä¸ªå€¼åœ¨åŒºå—é“¾ä¸Šè¢«å¤åˆ¶ï¼Œè€Œä¸ä»…æ˜¯è¢«ç§»åŠ¨
drop å…è®¸ä¸€ä¸ªå€¼åœ¨åŒºå—é“¾ä¸Šè¢«ä¸¢å¼ƒï¼Œæ— éœ€ç‰¹åˆ«å¤„ç†
ç¯å¢ƒå‡†å¤‡
- Aptos CLI
- Aptos TypeScript SDK
- Aptos Wallet Adapter
- Create React App
- node and npm
ç½‘ç»œ
Mainnet
- APT çš„ä»·å€¼ï¼š æœ‰ä»·å€¼ï¼Œ ä¸èƒ½ä¹±èŠ±
- ä¿å­˜æœŸé™ï¼šæ°¸ä¹…
Testnet
- APT çš„ä»·å€¼ï¼š éšä¾¿èŠ±
- ä¿å­˜æœŸé™ï¼šæ°¸ä¹…
Devnet
- APT çš„ä»·å€¼ï¼š éšä¾¿èŠ±
- ä¿å­˜æœŸé™ï¼šæ¯ä¸ªç¤¼æ‹œåˆ·æ–°
DEMO
åœ¨ Aptos Move ä¸­ï¼Œinit_module æ˜¯æ¨¡å—çš„åˆå§‹åŒ–å‡½æ•°ï¼Œç”¨äºåœ¨æ¨¡å—éƒ¨ç½²æ—¶æ‰§è¡Œä¸€äº›å¿…è¦çš„åˆå§‹åŒ–é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºèµ„æºã€é…ç½®æ¨¡å—çš„åˆå§‹çŠ¶æ€ç­‰ã€‚å¦‚æœä½ çš„æ¨¡å—ä¸éœ€è¦æ‰§è¡Œè¿™äº›åˆå§‹åŒ–æ“ä½œï¼Œé‚£ä¹ˆä½ å¯ä»¥é€‰æ‹©ä¸å†™ init_moduleã€‚
 â€¢ å¦‚æœæ¨¡å—éœ€è¦åœ¨éƒ¨ç½²æ—¶æ‰§è¡ŒæŸäº›æ“ä½œï¼Œåˆ™å¿…é¡»å†™ init_moduleã€‚
 â€¢ å¦‚æœæ²¡æœ‰åˆå§‹åŒ–éœ€æ±‚ï¼Œinit_module å¯ä»¥ä¸å†™ã€‚
exists<T>(address) æ˜¯ Move ä¸­çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå®ƒç”¨æ¥åˆ¤æ–­æŸä¸ªåœ°å€ä¸Šæ˜¯å¦å·²ç»å­˜å‚¨äº†æŸç§ç±»å‹çš„èµ„æºï¼ˆT ç±»å‹ï¼‰ã€‚

åœ¨ Move ä¸­ç”Ÿæˆç­¾åè€… (`signer`) çš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†ç¡®ä¿æ“ä½œæƒé™å’Œå®‰å…¨æ€§ã€‚ç­¾åè€…æ˜¯ä»£è¡¨ä¸€ä¸ªåœ°å€æˆ–è€…å¯¹è±¡è¿›è¡Œäº¤æ˜“çš„å®ä½“ï¼Œæ‹¥æœ‰è¯¥åœ°å€æˆ–å¯¹è±¡çš„æˆæƒã€‚å› æ­¤ï¼Œç”Ÿæˆç­¾åè€…çš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºäº†æ§åˆ¶ç‰¹å®šèµ„æºæˆ–å¯¹è±¡çš„è®¿é—®æƒé™ï¼Œç¡®ä¿åªæœ‰åˆæ³•çš„å®ä½“æ‰èƒ½æ“ä½œå®ƒä»¬ã€‚

### å…·ä½“åŸå› åŒ…æ‹¬

1. **æƒé™æ§åˆ¶**ï¼š
   - `signer` æ˜¯ Move ä¸­ç”¨æ¥æˆæƒå¯¹èµ„æºæˆ–å¯¹è±¡æ‰§è¡Œæ•æ„Ÿæ“ä½œçš„æœºåˆ¶ã€‚åªæœ‰æŒæœ‰åˆæ³• `signer` çš„äººï¼Œæ‰èƒ½å¯¹ç›¸å…³çš„èµ„æºè¿›è¡Œä¿®æ”¹æˆ–äº¤äº’æ“ä½œã€‚
   - ç”Ÿæˆå¯¹è±¡çš„ `signer` å¯ä»¥ç¡®ä¿åç»­å¯¹è¯¥å¯¹è±¡çš„æ“ä½œæ˜¯ç»è¿‡æˆæƒçš„ï¼Œé˜²æ­¢æœªç»æˆæƒçš„è®¿é—®æˆ–æ“ä½œã€‚

2. **å®‰å…¨æ€§**ï¼š
   - åœ¨é“¾ä¸Šæ“ä½œæ—¶ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯å…¬å¼€çš„ã€‚é€šè¿‡ä½¿ç”¨ç­¾åè€…ï¼Œå¯ä»¥éªŒè¯æ¯ä¸ªæ“ä½œçš„åˆæ³•æ€§ã€‚ç”Ÿæˆçš„ç­¾åè€…å¯ä»¥ç¡®ä¿åªæœ‰ç‰¹å®šçš„ç”¨æˆ·æˆ–ç‰¹å®šå¯¹è±¡æŒæœ‰çš„æƒé™æ‰èƒ½ä¿®æ”¹å¯¹è±¡çŠ¶æ€ã€‚
   - ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªç”¨æˆ·åˆ›å»ºäº†ä¸€ä¸ª `TodoList` å¯¹è±¡ï¼Œç”Ÿæˆè¯¥å¯¹è±¡çš„ç­¾åè€…å¯ä»¥ç”¨æ¥ç¡®ä¿åªæœ‰è¿™ä¸ª `TodoList` çš„æ‹¥æœ‰è€…æ‰èƒ½ä¿®æ”¹æˆ–åˆ é™¤å®ƒã€‚

3. **èµ„æºæ‰€æœ‰æƒçš„ç¡®è®¤**ï¼š
   - åœ¨ Move ä¸­ï¼Œèµ„æºçš„æ‰€æœ‰æƒæ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œèµ„æºæ°¸è¿œä¸èƒ½è¢«å¤åˆ¶æˆ–ä¸¢å¼ƒã€‚é€šè¿‡ç”Ÿæˆä¸å¯¹è±¡å…³è”çš„ç­¾åè€…ï¼Œå¯ä»¥è¯æ˜æŸä¸ªåœ°å€æˆ–å¯¹è±¡å¯¹èµ„æºçš„æ‹¥æœ‰æƒã€‚
   - å¦‚æœä½ æƒ³æ“ä½œæŸä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œæ¯”å¦‚ä¿®æ”¹å…¶ä¸­çš„æ•°æ®ï¼Œç”Ÿæˆè¯¥å¯¹è±¡çš„ç­¾åè€…æ˜¯è¯æ˜ä½ æ‹¥æœ‰è¯¥å¯¹è±¡å¹¶æœ‰æƒæ“ä½œå®ƒçš„æ–¹å¼ã€‚

4. **å¯¹è±¡çš„ç‹¬ç«‹æ€§**ï¼š
   - æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥æœ‰è‡ªå·±ç‹¬ç«‹çš„ç­¾åè€…ï¼Œè¿™æ„å‘³ç€å¯¹è±¡æœ¬èº«å¯ä»¥æœ‰æˆæƒæ‰§è¡Œçš„è¡Œä¸ºã€‚ç”Ÿæˆç­¾åè€…çš„ç›®çš„æ˜¯èµ‹äºˆå¯¹è±¡æƒé™ï¼Œä»¥ä¾¿å¯¹è±¡æœ¬èº«å¯ä»¥æ‰§è¡Œä¸å…¶ç›¸å…³çš„æ“ä½œã€‚
   - ä¾‹å¦‚ï¼Œä¸€ä¸ª `TodoList` å¯¹è±¡å¯ä»¥æœ‰è‡ªå·±çš„ç­¾åè€…ï¼Œç¡®ä¿åªæœ‰è¯¥å¯¹è±¡çš„æ‰€æœ‰è€…æˆ–åˆ›å»ºè€…æ‰èƒ½å¯¹å…¶è¿›è¡Œä¿®æ”¹æˆ–æ“ä½œã€‚

### å®ä¾‹åŒ–å¯¹è±¡ç­¾åè€…çš„åœºæ™¯

- å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æ—¶ï¼ˆæ¯”å¦‚ `TodoList`ï¼‰ï¼Œå¯èƒ½éœ€è¦åç»­æ“ä½œæ¥ä¿®æ”¹ã€åˆ é™¤æˆ–æ·»åŠ æ•°æ®ã€‚é€šè¿‡ç”Ÿæˆå¯¹è±¡ç­¾åè€…ï¼Œåç»­å¯¹è¯¥å¯¹è±¡çš„æ“ä½œå¿…é¡»é€šè¿‡è¯¥ç­¾åè€…æ¥è¿›è¡Œï¼Œè¿™ç¡®ä¿äº†å¯¹è±¡çš„æ“ä½œæƒé™åªæˆäºˆäº†æ­£ç¡®çš„å®ä½“ã€‚
- å¦‚æœä½ å…è®¸å…¶ä»–ç”¨æˆ·åœ¨å¯¹è±¡ä¸­æ‰§è¡ŒæŸäº›æ“ä½œï¼ˆå¦‚å…±äº«èµ„æºæˆ–åˆ†é…ä»»åŠ¡ï¼‰ï¼Œä½ å¯èƒ½ä¼šæ ¹æ®è¯¥ç­¾åè€…çš„æƒé™æ§åˆ¶ä»–ä»¬èƒ½åšä»€ä¹ˆã€‚

### ä¸¾ä¾‹

åœ¨ä½ çš„ä»£ç ä¸­ï¼Œç”Ÿæˆ `obj_holds_todo_list` å¯¹è±¡çš„ç­¾åè€…åï¼Œå¯ä»¥åœ¨åç»­æ“ä½œä¸­ï¼Œç”¨è¯¥ç­¾åè€…æ¥æ‰§è¡Œå¯¹ `TodoList` çš„æ›´æ–°æ“ä½œã€‚ä¾‹å¦‚ï¼Œå½“ä½ æƒ³è¦æ·»åŠ ä¸€é¡¹ä»»åŠ¡åˆ° `TodoList` ä¸­æ—¶ï¼Œåªæœ‰é€šè¿‡æŒæœ‰æ­£ç¡®ç­¾åè€…çš„ç”¨æˆ·æ‰å¯ä»¥è¿›è¡Œæ“ä½œï¼Œé˜²æ­¢å…¶ä»–ç”¨æˆ·å¯¹ä¸å±äºè‡ªå·±çš„ `TodoList` è¿›è¡Œä¿®æ”¹ã€‚

æ€»ç»“æ¥è¯´ï¼Œç”Ÿæˆç­¾åè€…æ˜¯ä¸ºäº†ç¡®ä¿æ“ä½œæƒé™ã€å®‰å…¨æ€§ã€èµ„æºæ‰€æœ‰æƒçš„ç¡®è®¤ä»¥åŠå¯¹è±¡çš„ç‹¬ç«‹æ€§ã€‚é€šè¿‡ç­¾åè€…æœºåˆ¶ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†é“¾ä¸Šå¯¹è±¡å’Œèµ„æºçš„è®¿é—®å’Œæ“ä½œæƒé™ã€‚

### 2024.09.24

let signer_cap = resource_account::retrieve_resource_account_cap(swap_signer, @deployer);
è¿™ä¸ªæ˜¯éœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ª resource account
å› ä¸ºè€ç‰ˆçš„ Coin å¿…é¡»é€šè¿‡å½“å‰åˆçº¦åˆ›å»º
ç°åœ¨çš„ FA åº”è¯¥æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†

Aptos Prover
Aptos test
aptos move test
ensures
åœ¨ Aptos Move ä¸­ï¼Œ`ensures` æ˜¯ä¸€ä¸ªç”¨äºå‡½æ•°è§„èŒƒçš„å…³é”®å­—ï¼Œç¡®ä¿æŸä¸ªæ¡ä»¶åœ¨å‡½æ•°æ‰§è¡Œç»“æŸåä¿æŒä¸ºçœŸã€‚å®ƒé€šå¸¸ç”¨äºæ™ºèƒ½åˆçº¦ä¸­çš„éªŒè¯ï¼Œä»¥ç¡®ä¿åœ¨å‡½æ•°æ‰§è¡Œå‰åä¿æŒçŠ¶æ€çš„ä¸€è‡´æ€§ã€‚`ensures` å…³é”®å­—å’Œå‰ç½®æ¡ä»¶çš„ `requires` ç±»ä¼¼ï¼Œä½† `ensures` ä¸»è¦ç”¨äºå®šä¹‰å‡½æ•°æ‰§è¡Œåçš„çŠ¶æ€ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Aptos Move ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ `ensures`ï¼š

```move
module Example {

    struct User has key {
        balance: u64,
    }

    public fun add_funds(user: &mut User, amount: u64) {
        let old_balance = user.balance;
        user.balance = old_balance + amount;

        // Ensures that the balance has increased by the expected amount
        ensures user.balance == old_balance + amount;
    }
}
```

### è§£é‡Šè¯´æ˜

- `ensures` åœ¨è¿™é‡Œç”¨äºç¡®è®¤å‡½æ•° `add_funds` æ‰§è¡Œå®Œæ¯•åï¼Œç”¨æˆ·çš„ä½™é¢ `balance` å¢åŠ äº† `amount`ã€‚
- å¦‚æœ `ensures` ä¸­çš„æ¡ä»¶åœ¨å‡½æ•°ç»“æŸåä¸ä¸ºçœŸï¼ŒMove éªŒè¯å™¨å°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

åœ¨ Move ä¸­ï¼Œ`ensures` å¸®åŠ©å¼€å‘è€…åœ¨æ™ºèƒ½åˆçº¦ä¸­ä¿æŒé€»è¾‘çš„æ­£ç¡®æ€§ï¼Œç¡®ä¿çŠ¶æ€æ›´æ–°ç¬¦åˆé¢„æœŸï¼Œé˜²æ­¢é€»è¾‘é”™è¯¯æˆ–æ„å¤–è¡Œä¸ºã€‚

### ä½¿ç”¨ `ensures` çš„ä¸»è¦ç›®çš„

1. **éªŒè¯åˆçº¦æ‰§è¡Œåçš„çŠ¶æ€**ï¼šç¡®ä¿å‡½æ•°æ‰§è¡Œåçš„ç»“æœç¬¦åˆé¢„æœŸã€‚
2. **å¢å¼ºä»£ç å¯è¯»æ€§å’Œå¯é æ€§**ï¼šå¼€å‘è€…å¯ä»¥é€šè¿‡è¿™ç§å£°æ˜å¼çš„æ–¹å¼æ¸…æ™°åœ°è¡¨è¾¾åˆçº¦çš„é¢„æœŸè¡Œä¸ºã€‚
3. **å®‰å…¨æ€§ä¿è¯**ï¼šé€šè¿‡å®šä¹‰å‡½æ•°æ‰§è¡Œåçš„é¢„æœŸçŠ¶æ€ï¼Œç¡®ä¿åˆçº¦åœ¨ä¸åŒçŠ¶æ€è½¬æ¢ä¸­çš„å®‰å…¨æ€§ã€‚

è¿™æ˜¯ Aptos Move ä¸­ä¸€ç§å¸¸è§çš„ç¼–ç¨‹æ¨¡å¼ï¼Œç‰¹åˆ«é€‚ç”¨äºé‡‘èæˆ–å¤æ‚é€»è¾‘çš„æ™ºèƒ½åˆçº¦å¼€å‘åœºæ™¯ã€‚

æ˜¯çš„ï¼ŒAptos Move ä¸­ç¡®å®æœ‰ `assert`ï¼Œå®ƒä¸ `ensures` åœ¨æŸäº›æ–¹é¢ç±»ä¼¼ï¼Œéƒ½ç”¨äºéªŒè¯æ¡ä»¶ï¼Œä½†å®ƒä»¬çš„ä½œç”¨åœºæ™¯å’Œä½¿ç”¨æ–¹å¼ä¸åŒã€‚

### **`assert` å’Œ `ensures` çš„åŒºåˆ«**

1. **`assert` æ˜¯è¿è¡Œæ—¶æ£€æŸ¥ï¼š**
   - `assert` åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸»åŠ¨éªŒè¯æŸä¸ªæ¡ä»¶ï¼Œå¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œå°±ç«‹å³åœæ­¢æ‰§è¡Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚
   - ç”¨äºåœ¨ä»£ç ä¸­å¼ºåˆ¶æ£€æŸ¥æŸäº›æ¡ä»¶ï¼Œé˜²æ­¢ä¸æœŸæœ›çš„é€»è¾‘æ‰§è¡Œï¼Œé€šå¸¸å‡ºç°åœ¨å‡½æ•°æ‰§è¡Œçš„ä¸­é—´æˆ–æŸä¸ªç‰¹å®šæ­¥éª¤ã€‚

   **ç¤ºä¾‹ï¼š**

   ```move
   module Example {
       struct User has key {
           balance: u64,
       }

       public fun withdraw_funds(user: &mut User, amount: u64) {
           // è¿è¡Œæ—¶æ£€æŸ¥ï¼šç¡®ä¿ä½™é¢è¶³å¤Ÿ
           assert!(user.balance >= amount, 1); // å¦‚æœä½™é¢ä¸è¶³ï¼Œåœæ­¢æ‰§è¡Œå¹¶æŠ›å‡ºé”™è¯¯
           user.balance = user.balance - amount;
       }
   }
   ```

   åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`assert` ç”¨äºåœ¨ `withdraw_funds` å‡½æ•°ä¸­ç¡®ä¿ç”¨æˆ·ä½™é¢è¶³å¤Ÿï¼Œå¦‚æœä¸å¤Ÿåˆ™ç»ˆæ­¢æ‰§è¡Œã€‚

2. **`ensures` æ˜¯é™æ€éªŒè¯ï¼š**
   - `ensures` æ˜¯ä¸€ä¸ªå‡½æ•°æ‰§è¡Œåä½¿ç”¨çš„åç½®æ¡ä»¶ï¼Œç”¨äºé™æ€éªŒè¯å‡½æ•°æ‰§è¡Œç»“æŸåæŸä¸ªæ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚å®ƒä¸æ˜¯åœ¨å‡½æ•°æ‰§è¡Œä¸­è¿›è¡Œå³æ—¶æ£€æŸ¥ï¼Œè€Œæ˜¯ç”¨äºæè¿°å‡½æ•°åœ¨è¿”å›æ—¶å¿…é¡»ä¿è¯çš„çŠ¶æ€ã€‚
   - é€šå¸¸ç”¨äºæ™ºèƒ½åˆçº¦çš„å½¢å¼åŒ–éªŒè¯ï¼Œå¸®åŠ©éªŒè¯å™¨åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ä»£ç é€»è¾‘æ˜¯å¦æ­£ç¡®ã€‚

   **ç¤ºä¾‹ï¼š**

   ```move
   module Example {
       struct User has key {
           balance: u64,
       }

       public fun add_funds(user: &mut User, amount: u64) {
           let old_balance = user.balance;
           user.balance = old_balance + amount;

           // ç¡®ä¿ä½™é¢æ›´æ–°åçš„çŠ¶æ€æ­£ç¡®
           ensures user.balance == old_balance + amount;
       }
   }
   ```

   åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`ensures` ç”¨äºç¡®ä¿åœ¨ `add_funds` å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œ`user.balance` çš„å€¼æ˜¯æ­£ç¡®çš„ã€‚å®ƒä¸æ˜¯åœ¨å‡½æ•°ä¸­åŠ¨æ€æ£€æŸ¥ï¼Œè€Œæ˜¯å¸®åŠ© Move éªŒè¯å™¨åœ¨é™æ€åˆ†æé˜¶æ®µç¡®ä¿ä»£ç é€»è¾‘çš„æ­£ç¡®æ€§ã€‚

### **`assert` å’Œ `ensures` çš„ä½¿ç”¨åœºæ™¯ï¼š**

- **`assert`ï¼š** é€‚ç”¨äºä½ æƒ³åœ¨å‡½æ•°è¿è¡Œæ—¶å¼ºåˆ¶æ£€æŸ¥çš„æ¡ä»¶ï¼Œç¡®ä¿æŸäº›çŠ¶æ€åœ¨è¿è¡Œæ—¶ä¸ä¼šå‡ºé”™ã€‚å®ƒé€šå¸¸ç”¨æ¥é˜²æ­¢ä¸€äº›éæ³•æ“ä½œï¼Œæ¯”å¦‚è½¬è´¦ä½™é¢ä¸è¶³ç­‰ã€‚
  
- **`ensures`ï¼š** ä¸»è¦ç”¨äºå½¢å¼åŒ–éªŒè¯ï¼ˆformal verificationï¼‰ï¼Œç¡®ä¿åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œåˆçº¦çŠ¶æ€ç¬¦åˆé¢„æœŸã€‚åœ¨å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„åˆçº¦å¼€å‘ä¸­ï¼Œ`ensures` æä¾›äº†é¢å¤–çš„ä¿è¯ï¼Œå°¤å…¶æ˜¯åœ¨ç¼–è¯‘æ—¶é™æ€åˆ†æé˜¶æ®µã€‚

### æ€»ç»“

- **`assert`**ï¼šè¿è¡Œæ—¶æ¡ä»¶æ£€æŸ¥ï¼Œé€‚ç”¨äºé˜²æ­¢éæ³•æ“ä½œæˆ–é€»è¾‘é”™è¯¯ã€‚
- **`ensures`**ï¼šç¼–è¯‘æ—¶çš„åç½®æ¡ä»¶æ£€æŸ¥ï¼Œç¡®ä¿å‡½æ•°ç»“æŸåçš„çŠ¶æ€ç¬¦åˆé¢„æœŸï¼Œé€‚ç”¨äºå½¢å¼åŒ–éªŒè¯å’Œæ›´é«˜å±‚æ¬¡çš„å®‰å…¨æ€§ä¿è¯ã€‚

### 2024.09.25

ä¸€ä¸ªäººå¯ä»¥æ‹¥æœ‰å¤šä¸ªfungible store æ¯ä¸ªstoreéƒ½æ˜¯ä¸€ä¸ªobjectã€‚ primaryçš„fungible storeæ˜¯æ¯ä¸ªè´¦æˆ·deterministicçš„
ç±»ä¼¼äºé»˜è®¤çš„store
coinçš„coinstoreä¸€ä¸ªäººåªèƒ½æœ‰ä¸€ä¸ª å°±æ˜¯é»˜è®¤çš„
å‘å¸ƒåˆ°objectçš„åˆçº¦ï¼Œå¯ä»¥åœ¨åˆçº¦å†…éƒ¨è·å–åˆ°è¯¥object

module SomeAddress::SomeModule {
 ....
}

 @SomeAddress å°±æ˜¯å½“å‰åˆçº¦åœ°å€

å¦‚æœåˆçº¦æ˜¯é€šè¿‡ Object å‘å¸ƒçš„ï¼Œé‚£ä¹ˆ @SomeAddress å°±æ˜¯ Object åœ°å€/ åˆçº¦åœ°å€
Object<T> å¯ä»¥ä» address ç”Ÿæˆå‡ºæ¥
ç”Ÿæˆæ—¶ï¼ŒVM ä¼šæ£€æŸ¥å¯¹åº”çš„çŠ¶æ€
æ¯”å¦‚ object::address_to_object<ObjectCore>(object_address) çš„æ—¶å€™

vm ä¼šæ£€æµ‹ è¿™ä¸ª address æ˜¯ä¸æ˜¯ä¸€ä¸ª object address
å¦‚æœæ˜¯ä¸€ä¸ª objectï¼Œå†æ£€æµ‹è´¦æˆ·ä¸‹æ˜¯å¦æœ‰ <ObjectCore> è¿™ä¸ªç»“æ„

### 2024.09.26

init_module publish çš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨
åˆ›å»ºå¯¹è±¡çš„ä¸¤ç§æ–¹æ³•ï¼š
create_named_object
create_sticky_object

```move
module contract::faucet {
    use aptos_framework::fungible_asset::{Self, TransferRef, BurnRef, Metadata, FungibleAsset, MintRef};
    use aptos_framework::object::{Self, Object};
    use aptos_framework::primary_fungible_store;
    use std::string::utf8;
    use std::option;
    use std::signer;
    #[test_only]
    use aptos_framework::account;

    const ASSET_SYMBOL: vector<u8> = b"FA";

    struct MyMintRef has key {
        mint_ref: MintRef
    }

    struct MyTransferRef has key {
        transfer_ref: TransferRef
    }

    struct MyBurnRef has key {
        burn_ref: BurnRef
    }

    fun init_module(contract: &signer) {
        let constructor_ref = object::create_named_object(contract, ASSET_SYMBOL);
        primary_fungible_store::create_primary_store_enabled_fungible_asset(
            &constructor_ref,
            option::none(),
            utf8(b"FA Coin"), /* name */
            utf8(ASSET_SYMBOL), /* symbol */
            8, /* decimals */
            utf8(b"http://example.com/favicon.ico"), /* icon */
            utf8(b"http://example.com"), /* project */
        );

        let mint_ref = fungible_asset::generate_mint_ref(&constructor_ref);


        let transfer_ref = fungible_asset::generate_transfer_ref(&constructor_ref);


        let burn_ref = fungible_asset::generate_burn_ref(&constructor_ref);

        move_to(
            contract,
            MyMintRef {
                mint_ref
            }
        );

        move_to(
            contract,
            MyBurnRef {
                burn_ref
            }
        );

        move_to(
            contract,
            MyTransferRef {
                transfer_ref
            }
        );
    }

    entry fun faucet(
        sender: &signer,
        amount: u64
    ) acquires MyMintRef {
        let my_mint_ref = borrow_global<MyMintRef>(@contract);
        let fa  = fungible_asset::mint(&my_mint_ref.mint_ref, amount);
        primary_fungible_store::deposit( signer::address_of(sender), fa);
    }



    #[test]
    fun test() acquires MyMintRef {
        let user_signer = account::create_account_for_test(@contract);
        init_module(&user_signer);

        let user1_signer = account::create_account_for_test(@0x12345);
        faucet(
            &user1_signer,
            1 * 1000 * 1000 * 100
        );
    }
}

```

### 2024.09.27

ç¬”è®°å†…å®¹

### 2024.09.28

ç¬”è®°å†…å®¹

### 2024.09.29

ç¬”è®°å†…å®¹

### 2024.09.30

ç¬”è®°å†…å®¹

### 2024.10.01

ç¬”è®°å†…å®¹

### 2024.10.02

ç¬”è®°å†…å®¹

### 2024.10.03

ç¬”è®°å†…å®¹

### 2024.10.04

ç¬”è®°å†…å®¹

### 2024.10.05

ç¬”è®°å†…å®¹

### 2024.10.06

ç¬”è®°å†…å®¹

### 2024.10.07

ç¬”è®°å†…å®¹

### 2024.10.08

ç¬”è®°å†…å®¹

### 2024.10.09

ç¬”è®°å†…å®¹

<!-- Content_END -->
